!! IOS XR Configuration 6.3.1
!
lldp
exit
!
xml agent tty iteration off
!
hostname AS65000_PE4
!
line console
 exec-timeout 0 0
 session-timeout 0
!
line default
 exec-timeout 0 0
 session-timeout 0
 !ipv4 unnumbered mpls traffic-eng Loopback0
ipv4 prefix-list PR-TUNNEL
 10 permit 172.16.0.11/32
 20 permit 172.16.0.33/32
 30 permit 172.16.0.44/32
!
!
interface Gi0/0/0/0
 description TO_CORE_P2
 ipv4 address 10.0.0.11/31
 no shutdown
!
!
interface Gi0/0/0/1
 description TO_CORE_PE3
 ipv4 address 10.0.0.13/31
 no shutdown
!
interface Gi0/0/0/2.1001
 description TO_CDN_SW1
 ipv4 address 10.2.0.44/24
 encapsulation dot1q 1001
!
!
interface Loopback0
 description SYSTEM_LO_IP
 ipv4 address 172.16.0.44/32
 no shutdown
route-policy PL-iBGP-RR-OUT
set next-hop self
end-policy
!
!
route-policy PL-EBGP-65002-IN
  pass
end-policy
!
route-policy PL-EBGP-65002-OUT
  pass
end-policy
!
!
router isis core
 is-type level-2-only
 net 49.0000.1720.1600.0044.00
 address-family ipv4 unicast
  metric-style wide
  mpls traffic-eng level-2-only
  maximum-paths 8
 !
!
interface Gi0/0/0/0
 point-to-point
 address-family ipv4 unicast
  metric 100 level 2
!
interface Gi0/0/0/1
 point-to-point
 address-family ipv4 unicast
  metric 100 level 2
interface Loopback0
 passive
 address-family ipv4 unicast
 !
!
router bgp 65000
bgp router-id 172.16.0.44
address-family ipv4 unicast
additional-paths receive
additional-paths send
!
neighbor-group RR
 remote-as 65000
 update-source Loopback0
 address-family ipv4 unicast
 route-policy PL-iBGP-RR-OUT out
 soft-reconfiguration inbound always
!
neighbor 172.16.0.201
use neighbor-group RR
!
neighbor 172.16.0.202
use neighbor-group RR
!
!
neighbor 10.2.0.4
 remote-as 65002
 update-source Loopback0
 address-family ipv4 unicast
 soft-reconfiguration inbound always
 route-policy PL-EBGP-65002-IN in
 route-policy PL-EBGP-65002-OUT out
!
!
mpls oam
!
mpls ldp
mpls traffic-eng
interface Gi0/0/0/0
!
mpls traffic-eng
interface Gi0/0/0/1
!
!
!
group GR-LSP
interface 'tunnel-te.*'
ipv4 unnumbered Loopback0
fast-reroute protect node
autoroute announce
exit
record-route
path-option 1 dynamic
no shutdown
exit
exit
interface tunnel-te11
 apply-group GR-LSP
 signalled-name PE4—>PE1
 destination 172.16.0.11
 no shutdown
interface tunnel-te22
 apply-group GR-LSP
 signalled-name PE4—>PE2
 destination 172.16.0.22
 no shutdown
interface tunnel-te33
 apply-group GR-LSP
 signalled-name PE4—>PE3
 destination 172.16.0.33
 no shutdown

